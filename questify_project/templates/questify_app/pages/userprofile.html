{% extends 'questify_app/layout/base.html' %}

{% load static %}

{% block page_css %}
    <link rel="stylesheet" href="css/userprofile.css" />
    <link rel="stylesheet" href="css/style.css" />

    {% endblock %}

    {% block title %}User Profile{% endblock %}
    
    {% block content %}
    <!-- Header -->
    <header>
      <nav class="navbar navbar-expand-lg navbar-light bg-light position-fixed">
        <div class="container-fluid">
          <!-- Logo and Questify Text -->
          <a
            class="navbar-brand d-flex align-items-center fs-0 fw-bold"
            href="#"
          >
            Questify
            <img
              src="assets/images/arcticons--flixquest.png"
              alt="logo"
              class="ms-2"
              width="30"
              height="30"
            />
          </a>

          <!-- Toggler for mobile view -->
          <button
            class="navbar-toggler"
            type="button"
            data-bs-toggle="collapse"
            data-bs-target="#navbarNavDropdown"
            aria-controls="navbarNavDropdown"
            aria-expanded="false"
            aria-label="Toggle navigation"
          >
            <span class="navbar-toggler-icon"></span>
          </button>

          <!-- Navbar items -->
          <div class="collapse navbar-collapse" id="navbarNavDropdown">
            <ul class="navbar-nav mx-auto me-auto mb-2 mb-lg-0">
              <li class="nav-item mx-3">
                <a class="nav-link" href="index.html">Home</a>
              </li>
              <li class="nav-item mx-2">
                <a class="nav-link" href="semuakelas.html">Semua Kelas</a>
              </li>
              <li class="nav-item mx-3">
                <a class="nav-link" href="#">Langganan</a>
              </li>
              <li class="nav-item mx-3">
                <a class="nav-link" href="hasilnilai.html">Hasil Nilai</a>
              </li>
            </ul>

            <!-- Bahasa and Masuk for desktop view -->
            <div class="d-none d-lg-flex align-items-center">
              <img
                src="assets/images/world-map.png"
                alt="language"
                class="language-icon"
                style="width: 20px"
              />
              <span class="me-3">English</span>
              <a href="userprofile.html">
                <img
                  src="assets/images/profil.png"
                  alt="profile"
                  class="profile-pic"
                />
              </a>
            </div>

            <!-- Dropdown for mobile view -->
            <ul class="navbar-nav d-lg-none">
              <li class="nav-item dropdown">
                <a
                  class="nav-link dropdown-toggle"
                  href="#"
                  id="navbarDropdown"
                  role="button"
                  data-bs-toggle="dropdown"
                  aria-expanded="false"
                >
                  Lainnya
                </a>
                <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                  <li><a class="dropdown-item" href="#">Bahasa</a></li>
                  <li><hr class="dropdown-divider" /></li>
                  <li>
                    <a
                      class="dropdown-item btn btn-outline-primary"
                      href="userprofile.html"
                      >Profile</a
                    >
                  </li>
                </ul>
              </li>
            </ul>
          </div>
        </div>
      </nav>
    </header>

    <!-- Profile Section -->
    <main class="container mt-5 px-5">
      <div class="row justify-content-center">
        <div class="col-md-12 mb-5">
          <section class="card" style="margin-top: 100px">
            <div class="card-body">
              <section>
                <ul
                  class="nav nav-tabs justify-content-between align-items-center"
                  style="
                    background-color: #9575cd;
                    padding: 10px;
                    border-radius: 10px;
                  "
                >
                  <li class="nav-item">
                    <a
                      class="nav-link active text-white"
                      href="#"
                      style="font-weight: bold"
                      >Profile</a
                    >
                  </li>
                  <li class="nav-item">
                    <a
                      class="nav-link text-white"
                      href="#"
                      style="font-weight: bold"
                      >Daftar Transaksi</a
                    >
                  </li>
                  <li class="nav-item">
                    <a
                      class="nav-link text-white"
                      href="#"
                      style="font-weight: bold"
                    >
                      <i class="fas fa-sign-out-alt"></i> Logout
                    </a>
                  </li>
                </ul>
              </section>

              <section>
                <div class="row mt-4 justify-content-center">
                  <div class="col-md-8 mx-auto">
                    <form>
                      <div class="row mb-3">
                        <div class="col">
                          <label for="first-name" class="form-label"
                            >Nama Depan</label
                          >
                          <input
                            type="text"
                            class="form-control"
                            id="first-name"
                            value=""
                          />
                        </div>
                        <div class="col">
                          <label for="last-name" class="form-label"
                            >Nama Belakang</label
                          >
                          <input
                            type="text"
                            class="form-control"
                            id="last-name"
                            value=""
                          />
                        </div>
                      </div>
                      <div class="mb-3">
                        <label for="email" class="form-label">Email</label>
                        <input
                          type="email"
                          class="form-control"
                          id="email"
                          value=""
                        />
                      </div>
                      <div class="mb-3">
                        <label for="password" class="form-label"
                          >Password</label
                        >
                        <input
                          type="password"
                          class="form-control"
                          id="password"
                          placeholder=""
                        />
                      </div>
                      <div class="mb-3">
                        <label for="confirm-password" class="form-label"
                          >Konfirmasi Password</label
                        >
                        <input
                          type="password"
                          class="form-control"
                          id="confirm-password"
                          placeholder=""
                        />
                        <small class="text-muted"
                          >Isi password jika ingin mengubahnya</small
                        >
                      </div>
                      <div class="mb-3">
                        <label for="profileUpload" class="form-label"
                          >Foto Profil</label
                        >
                        <input
                          class="form-control"
                          type="file"
                          id="profileUpload"
                          accept="image/*"
                          onchange="loadFile(event)"
                        />
                      </div>
                    </form>
                  </div>
                  <div class="col-md-4 d-flex flex-column align-items-center">
                    <img
                      id="output"
                      src="default-profile.jpg"
                      alt="Profile Picture"
                      class="rounded-circle img-fluid"
                      style="width: 150px; height: 150px"
                    />
                  </div>
                </div>
              </section>

              <div class="text-center mt-4">
                <button class="btn btn-primary">SAVE</button>
              </div>
            </div>
          </section>
        </div>
      </div>
    </main>

    <!-- Footer -->
    <footer class="footer">
      <div class="container">
        <p>&copy; 2024 Questify. All Rights Reserved.</p>
      </div>
    </footer>

    <!-- JavaScript -->
    <script>
      function loadFile(event) {
        var output = document.getElementById("output");
        var navbarProfilePic = document.querySelector('.profile-pic');

        // Ubah foto profil di form dan navbar
        output.src = URL.createObjectURL(event.target.files[0]);
        navbarProfilePic.src = URL.createObjectURL(event.target.files[0]);

        // Revoke URL setelah image di-load
        output.onload = function () {
          URL.revokeObjectURL(output.src);
        };
        navbarProfilePic.onload = function () {
          URL.revokeObjectURL(navbarProfilePic.src);
        };
      }
    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"></script>
{% endblock %}
